{% extends "base.html" %} {% block content %}
<h1>Criar Nova Rota</h1>

<form id="routeForm">
  <div class="form-group">
    <label>Nome:</label>
    <input type="text" id="name" required class="form-control" />
  </div>

  <div class="form-group">
    <label>Data/Hora (Brasília):</label>
    <input type="datetime-local" id="start_at" required class="form-control" />
  </div>

  <div class="form-group">
    <label>Base de Início:</label>
    <select id="start_location_base_id" required class="form-control">
      <option value="">Carregando...</option>
    </select>
  </div>

  <div class="form-group">
    <label>Tipo de Destino:</label>
    <select id="end_location_type" required class="form-control">
      <option value="service">Serviço</option>
      <option value="operational_base">Base Operacional</option>
    </select>
  </div>

  <div class="form-group hidden" id="end_base_group">
    <label>Base de Destino:</label>
    <select id="end_location_base_id" class="form-control">
      <option value="">Selecione...</option>
    </select>
  </div>

  <div class="form-group">
    <label>Agente:</label>
    <select id="agent_id" required class="form-control">
      <option value="">Carregando...</option>
    </select>
  </div>

  <div class="form-group">
    <label>Veículo:</label>
    <select id="vehicle_id" class="form-control">
      <option value="">Nenhum</option>
    </select>
  </div>

  <div class="form-group">
    <label>Serviços:</label>
    <button type="button" id="refreshServices" class="btn btn-success btn-sm">
      Atualizar Serviços
    </button>
    <div id="servicesList" class="services-list">Carregando serviços...</div>
  </div>

  <button type="submit" class="btn btn-primary">Criar Rota</button>
</form>

<div id="result" class="mt-3"></div>

<!-- O script específico para a página de rotas -->
<script src="{{ url_for('static', path='js/rotas.js') }}"></script>
{% endblock %}
